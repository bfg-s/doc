<?phpnamespace Bfg\Doc\Core;use Illuminate\Filesystem\Filesystem;use Illuminate\Support\Collection;use Symfony\Component\Finder\SplFileInfo;/** * Class ScanFiles * @package Bfg\Doc\Core */class ScanFiles{    /**     * @var Collection     */    public Collection $files;    /**     * ScanFiles constructor.     * @param  Filesystem  $filesystem     * @param  ScanDirectories  $scanDirectories     */    public function __construct(        protected Filesystem $filesystem,        ScanDirectories $scanDirectories    ) {        $this->files = $this->makeList($scanDirectories->directories);    }    /**     * @param  Collection  $directories     * @return Collection     */    protected function makeList(Collection $directories): Collection    {        $collect = collect();        foreach ($directories as $directory) {            $files = collect($this->filesystem->files($directory))                ->map(fn (SplFileInfo $i) => $i->getPathname())                ->filter(fn ($i) => preg_match('/.*\.php$/', $i));            $collect = $collect->merge($files);        }        return $collect;    }}